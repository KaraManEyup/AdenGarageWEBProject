@model IEnumerable<Core.Models.Musteri>

@{
    ViewData["Title"] = "Müşteri Listesi";
}

<!-- Butonları Flexbox ile yerleştiriyoruz -->

<h1 class="text-center mb-4 text-warning">Müşteri Listesi</h1>

<div class="d-flex justify-content-between mb-3">
    <!-- Sıralama linkleri sol tarafta -->
    <div>
        <a class="btn btn-outline-warning" href="@Url.Action("Index", "Musteris", new { sortOrder = "IsimAsc" })">Isim Artan |↑|</a>
        <a class="btn btn-outline-warning" href="@Url.Action("Index", "Musteris", new { sortOrder = "IsimDesc" })">Isim Azalan |↓|</a>
    </div>

    <!-- "Araba Ile Yeni Müşteri Ekle" butonu sağ tarafta -->
    <div>
        <a asp-action="Create" class="btn btn-warning">Yeni Müşteri Ekle</a>
    </div>
</div>

<!-- Müşteri tablosu -->
<table style="background-color: rgba(0,0,0,0.6)" class="table table-hover kutu">
    <thead style="font-size:large">
        <tr style="color:gold">
            <th>#</th>
            <th>İsim</th>
            <th>Soyisim</th>
            <th>Telefon</th>
            <th>Arabalar</th>
            <th>İşlemler</th>
            <th>Plaka</th>
        </tr>
    </thead>
    <tbody>
        @if (Model.Any())
        {
            int counter = 1;
            foreach (var musteri in Model)
            {
                <tr style="color:white">
                    <td>@counter</td>
                    <td>@musteri.Isim</td>
                    <td>@musteri.Soyisim</td>
                    <td>@musteri.Telefon</td>
                    <td>
                        @if (musteri.Arabalar != null && musteri.Arabalar.Any())
                        {
                            <ul>
                                @foreach (var araba in musteri.Arabalar)
                                {
                                    <li>
                                        <strong>@araba.Marka - @araba.Model -</strong>
                                    </li>
                                }
                            </ul>
                        }
                        else
                        {
                            <span class="text-warning">Bu müşterinin arabası yok!</span>
                        }
                    </td>
                    <td>
                        @if (musteri.Arabalar != null && musteri.Arabalar.Any())
                        {
                            <ul>
                                @foreach (var araba in musteri.Arabalar)
                                {
                                    <li>
                                        <strong> -@araba.Islem -</strong>
                                    </li>
                                }
                            </ul>
                        }
                    </td>
                    <td>
                        @if (musteri.Arabalar != null && musteri.Arabalar.Any())
                        {
                            <ul>
                                @foreach (var araba in musteri.Arabalar)
                                {
                                    <li>
                                        <strong> -@araba.Plaka -</strong>
                                    </li>
                                }
                            </ul>
                        }
                    </td>
                    <td>
                        <a asp-action="Details" asp-route-id="@musteri.Id" class="btn btn-info btn-sm">Detay</a>
                        <a asp-action="Edit" asp-route-id="@musteri.Id" class="btn btn-warning btn-sm">Düzenle</a>
                        <form asp-action="Delete" asp-route-id="@musteri.Id" method="post" class="d-inline">
                            <button type="submit" class="btn btn-danger btn-sm">Sil</button>
                        </form>
                    </td>
                </tr>
                counter++;
            }
        }
        else
        {
            <tr>
                <td colspan="6" class="text-center text-muted">Kayıtlı müşteri bulunmamaktadır.</td>
            </tr>
        }
    </tbody>
</table>
